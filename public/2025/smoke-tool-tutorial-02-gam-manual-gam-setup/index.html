
<!DOCTYPE html>
<html lang="en-US">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=4321&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.143.1">


<title>Smoke tool tutorial [02]: GAM manual - GAM setup - Leestory</title>
<meta property="og:title" content="Smoke tool tutorial [02]: GAM manual - GAM setup - Leestory">




  







<link rel="stylesheet" href="/css/my_fonts.css" media="all">
<link rel="stylesheet" href="/css/my_main.css" media="all">


<style>
code {
  background-color: #f3eaff;
  color: black;           
  padding: 2px 4px;
  border-radius: 4px;
  font-size: 90%;
  font-family: Menlo, Consolas, monospace;
}

.centered-img {
  display: block;
  margin-left: auto;
  margin-right: auto;
  border: 1px solid black;
  width: auto;
  max-width: 100%;
  cursor: pointer;
  transition: transform 0.3s ease;
}

.modal {
  display: none;
  position: fixed;
  z-index: 9999;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.8);
  overflow: auto;
  animation: fadeIn 0.4s ease;
}

.modal-content {
  position: relative;
  top: 40px;
  margin: auto;
  width: auto;
  height: auto;
  max-width: 90vw;
  max-height: 90vh;
  display: block;
  cursor: zoom-in;
  transition: transform 0.3s ease;
}

.modal-content.zoomed {
  transform: scale(1.5);
  transform-origin: top;
  cursor: zoom-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes zoomIn {
  from { transform: scale(0.7); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

.close {
  position: absolute;
  top: 5px;
  right: 25px;
  color: #fff;
  font-size: 40px;
  font-weight: bold;
  cursor: pointer;
  z-index: 10000;
}

.code-container {
  position: relative;
}

.copy-button {
  position: absolute;
  top: 6px;
  right: 6px;
  background: #eee;
  border: none;
  border-radius: 4px;
  padding: 4px 8px;
  font-size: 12px;
  cursor: pointer;
  opacity: 0.6;
  transition: opacity 0.2s ease;
}

.copy-button:hover {
  opacity: 1;
}
</style>

<script>
function openModal(src) {
  const modal = document.getElementById("imgModal");
  const modalImg = document.getElementById("modalImg");
  modalImg.classList.remove("zoomed");
  modal.style.display = "block";
  modalImg.src = src;
}

function closeModal(event) {
  if (event.target.id === "imgModal" || event.target.className === "close") {
    document.getElementById("imgModal").style.display = "none";
  }
}

function toggleZoom(event) {
  const modalImg = document.getElementById("modalImg");
  modalImg.classList.toggle("zoomed");
}

document.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll("pre > code").forEach(function (codeBlock) {

    const pre = codeBlock.parentNode;
    const wrapper = document.createElement("div");
    wrapper.className = "code-container";
    pre.parentNode.insertBefore(wrapper, pre);
    wrapper.appendChild(pre);

    const button = document.createElement("button");
    button.className = "copy-button";
    button.textContent = "copy";

    button.addEventListener("click", function () {
      const text = codeBlock.innerText;
      navigator.clipboard.writeText(text).then(function () {
        button.textContent = "✅";
        setTimeout(() => button.textContent = "copy", 1500);
      });
    });

    wrapper.appendChild(button);
  });
});
</script>



  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        
<nav class="nav">
  <a href="/" class="nav-logo">
    <img src="/images/my_logo_2.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="/about/">About</a></li>
    
    <li><a href="/projects/">Projects</a></li>
    
    <li><a href="/smoke-tool/">Smoke tool</a></li>
    
    <li><a href="/resources/">Resources</a></li>
    
  </ul>
</nav>


      </header>


<div class="container">
    <main class="content">
          
              
              

              
                  
              
                  
              
                  
              
                  
              

              

              
              
                  
              
                  
              
                  
                      
                  
              
                  
              

              
                  <nav class="post-navigation">
                      
                          
                          <a class="prev-post" href="/2025/smoke-tool-tutorial-01-gam-manual-data-collection/">
                              &larr; Smoke tool tutorial [01]: GAM manual - Data collection
                          </a>
                      

                      
                          
                          <a class="next-post" href="/2025/smoke-tool-tutorial-03-gam-previous-overview/">
                              Smoke tool tutorial [03]: GAM previous - Overview &rarr;
                          </a>
                      
                  </nav>
                  <hr>
            
        
    
        <article class="article">
            
            <span class="article-duration">4 min read</span>
            

            <h1 class="article-title">Smoke tool tutorial [02]: GAM manual - GAM setup</h1>

            
            <span class="article-date">2025-03-11</span>
            

            <div class="article-content">
                
                


<style>
pre code {
    font-size: 14px;
}
</style>
<p>This tutorial is for the “PM2.5 and O3 smoke tool” app, available at (<a href="https://westar.shinyapps.io/PMO3smokeTool/" target="_blank">https://westar.shinyapps.io/PMO3smokeTool/</a>).</p>
<p>The <code>[GAM manual]</code> tab is designed to provide users with comprehensive tools to manually manage data collection and loading processes for building GAMs.
It includes two main sub-tabs: <code>[Data collection]</code>, <code>[Load dataset]</code>, <code>[GAM setup]</code>, and <code>[GAM results]</code>.
Please note that <code>[GAM setup]</code> and <code>[GAM results]</code> are normally hidden unless you run <code>[Load datset]</code>.</p>
<p>In this post, we introduce how to use <code>[GAM setup]</code> sub-tab in <code>[GAM manual]</code> tab.</p>
<hr>
<ol style="list-style-type: decimal">
<li>Go to <code>[GAM manual]</code> &gt; <code>[Load dataset]</code> tab.</li>
</ol>
<div style="text-align: center;">
<p><img src="01_SmokeTool_tutorial_gam_manual_gam_setup.png" class="centered-img" onclick="openModal(this.src)"></p>
</div>
<hr>
<ol start="2" style="list-style-type: decimal">
<li>There are several buttons as given below:</li>
</ol>
<ul>
<li><code>Browse...</code> (blue rectangle) : Used to import data prepared on your PC.</li>
<li><code>Load data from [Data collection: Merge data]</code> (in the red rectangle): Used to import data derived from <code>Merge data</code> in <code>[Data collection]</code> tab.
Please refer to the previous post <code>Smoke tool tutorial [01]: GAM manual - Data collection</code>.</li>
<li><code>Load sample data</code> (in the red rectangle): Used to import the sample data embedded in this app.</li>
<li><code>Clear all</code> (in the red rectangle): Used to clear the loaded data.</li>
</ul>
<p>In this post, we will explain using the sample data.
So, click the <code>Load sample data</code> button, then, the data will be displayed in the table below (green rectangle).
The sample data is from one of the sites analyzed in GAM v1.
This data includes various parameters such as meteorological data, MDA8 concentration, PM2.5 concentration, etc.</p>
<p>
<span style="color: red;">
Note that when you import the data, <code>[GAM setup]</code> sub-tab is activated
</span>
(black rectangle).
</p>
<div style="text-align: center;">
<p><img src="02_SmokeTool_tutorial_gam_manual_gam_setup.png" class="centered-img" onclick="openModal(this.src)"></p>
</div>
<hr>
<ol start="3" style="list-style-type: decimal">
<li>Once you import the data, then, go to <code>[GAM setup]</code> sub-tab,
As you can see the below screenshot,<br />
<code>[GAM setup]</code> sub-tab consists of two parts, such as <code>Variables</code> and <code>GAM parameter &amp; formula</code>.</li>
</ol>
<ul>
<li><code>Variables</code>: In this box, you can set up the response variable (y) and predictors (x) for GAM (red rectangle).
Additionally, if you want to train the GAM for a specific category, you can configure this option as shown in the green rectangle.</li>
<li><code>GAM parameter &amp; formula</code> (blue rectangle): This box displays the GAM setup status based on your selections,
and allows you to control the GAM options and hyper-parameters such as <code>family</code>, <code>link</code>, <code>method</code>, etc.
For more details, refer to the <code>mgcv</code> package
(<a href="https://CRAN.R-project.org/package=mgcv" target="_blank">Wood, 2023</a>).</li>
</ul>
<div style="text-align: center;">
<p><img src="03_SmokeTool_tutorial_gam_manual_gam_setup.png" class="centered-img" onclick="openModal(this.src)"></p>
</div>
<hr>
<ol start="4" style="list-style-type: decimal">
<li>Let’s build a simple GAM to predict <code>MDA8O3</code> including an interaction smooth term.</li>
</ol>
<ul>
<li>Check the box for <code>MDA8O3</code> in the Response (y), and <code>DOY</code>, <code>SRAD</code>, <code>TMAX</code>, and <code>RH</code> as Predictors (x) (red arrows).</li>
<li>Click the <code>Add interaction</code>, then set the variables as <code>DOY</code> (x1) and <code>TAMX</code> (x2) (red rectangle).</li>
</ul>
<p>As you set up the variables, the <code>GAM parameter &amp; formula section</code> will dynamically display the corresponding equation in real time. Additionally, a panel will be provided for configuring detailed options for each smooth term.</p>
<p style="color: red;">
Note that this post does not provide a detailed explanation of these options.
Therefore, it is recommended that you familiarize yourself with the <code>mgcv</code> package
(<a href="https://CRAN.R-project.org/package=mgcv" target="_blank">Wood, 2023</a>)
before using them.
</p>
<p>Once all settings are complete, click the <code>Run GAM</code> button (green rectangle).
Modeling begins the moment you click, and can take anywhere from a few seconds to a few minutes depending on the amount of data.</p>
<div style="text-align: center;">
<p><img src="04_SmokeTool_tutorial_gam_manual_gam_setup.png" class="centered-img" onclick="openModal(this.src)"></p>
</div>
<hr>
<ol start="5" style="list-style-type: decimal">
<li>After running the GAM, the <code>GAM results</code> sub-tab will be activated (red rectangle).
This tab consists of several results including <code>GAM summary</code>, <code>GAM check</code>, <code>GAM smooth plots</code>, and <code>Data table</code> (results).</li>
</ol>
<ul>
<li><code>GAM summary</code> (blue rectangle): Displays a summary of the fitted GAM model, including coefficients, significance, and model statistics.</li>
<li><code>GAM check</code> (green rectangle): Provides diagnostic plots to assess the model’s assumptions and fit quality.</li>
<li><code>GAM smooth plots</code> (black rectangle): Visualizes the smooth functions estimated for each predictor in the model.</li>
<li><code>Data table</code>: Shows the finalized data used for model training and predictions including predicted values, residuals, etc.
If you want to download the data, you just click the <code>Save data</code> button in the data table box.</li>
</ul>
<div style="text-align: center;">
<p><img src="05_SmokeTool_tutorial_gam_manual_gam_setup.png" class="centered-img" onclick="openModal(this.src)"></p>
</div>
<div style="text-align: center;">
<p><img src="06_SmokeTool_tutorial_gam_manual_gam_setup.png" class="centered-img" onclick="openModal(this.src)"></p>
</div>
<hr>
<p>So far, we have introduced how to build a GAM using a sample data in the <code>[GAM setup]</code> sub-tab.
The GAM provided in this app may be more limited compared to running it directly in R.
It is recommended to use it as a reference, while performing more extensive analyses directly in R.</p>
<p>In the next post, we will introduce how to explore and understand previously developed GAMs for O3 prediction and related air quality analyses in the <code>[GAM previous]</code> tab.</p>
<div id="imgModal" class="modal" onclick="closeModal(event)">
<p><span class="close" onclick="closeModal(event)">×</span>
<img class="modal-content" id="modalImg" onclick="toggleZoom(event)"></p>
</div>

            </div>
        </article>

        
<section id="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var d = document, s = d.createElement('script');
    s.src = '//haebum1991.disqus.com/embed.js'; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>


    </main>

    <aside class="sidebar">
        
<section class="widget">
    <h3>Archive category</h3>
    <br>
    <ul>
        
        <li>
            <a href="/categories/r-shiny">r-shiny</a> (5)
        </li>
        
        <li>
            <a href="/categories/smoketool-tutorial">smoketool-tutorial</a> (4)
        </li>
        
    </ul>
</section>


    </aside>

</div>


<footer class="footer-container">
  <ul class="footer-links">
    
    <li>
      <a href="https://gohugo.io/" class="footer-links-kudos">
        Made with 
        <img src="/images/hugo-logo.png" alt="Hugo Logo" width="22" height="22">
      </a>
    </li>
  </ul>

  <p class="footer-copyright">  
    Copyright © 2025 Leestory. All rights reserved.
  </p>

  <button id="back-to-top" onclick="scrollToTop()">▲ Back to Top</button>
</footer>







<script>
  function scrollToTop() {
      window.scrollTo({ top: 0, behavior: "smooth" });
  }

  window.addEventListener("scroll", function() {
      const button = document.getElementById("back-to-top");
      if (window.scrollY > 300) {
          button.style.display = "block";
      } else {
          button.style.display = "none";
      }
  });
</script>



